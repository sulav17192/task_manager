<div class="container">
  <h1 class="mb-4">Task Details</h1>

  <div class="card mb-4">
    <div class="card-body">
      <h4 class="card-title"><%= @task.title %></h4>
      <p class="card-text"><%= @task.description %></p>

      <p><strong>Due Date:</strong> <%= @task.due_date %></p>
      <p>
        <strong>Status:</strong>
        <% if @task.completed? %>
          <span class="badge bg-success">Completed</span>
        <% else %>
          <span class="badge bg-warning text-dark">Pending</span>
        <% end %>
      </p>
      <p><strong>Assigned To:</strong> <%= @task.assigned_to&.email || "Unassigned" %></p>
      <p><strong>Created By:</strong> <%= @task.creator.email %></p>
    </div>
  </div>

  <div class="d-flex gap-2">
    <%= link_to "Back", tasks_path, class: "btn btn-secondary" %>
    <% if policy(@task).update? %>
      <%= link_to "Edit", edit_task_path(@task), class: "btn btn-primary" %>
    <% end %>
    <% if policy(@task).destroy? %>
      <%= link_to "Delete", @task, data: { turbo_method: :delete, confirm: "Are you sure?" }, class: "btn btn-danger" %>
    <% end %>
    <% if policy(@task).mark_complete? && @task.pending? %>
      <%= button_to "Mark Complete", mark_complete_task_path(@task), method: :patch, class: "btn btn-success" %>
    <% end %>
  </div>
</div>
